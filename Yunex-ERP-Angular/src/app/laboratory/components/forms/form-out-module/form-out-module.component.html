<div class="container p-4 rounded-4 shadow" style="background-color: #ffffff;">
    <form (ngSubmit)="handleSubmit3()" #Form="ngForm" novalidate>
  
      <!-- Ticket -->
      <div class="form-floating mb-4 position-relative">
        <select
          id="ticket"
          name="ticket"
          class="form-select border border-2 border-primary rounded-3 shadow-sm"
          required
          [(ngModel)]="ticket"
          #ticketForm="ngModel"
          [ngClass]="{ 'is-invalid': ticketForm.invalid && (ticketForm.dirty || ticketForm.touched) }"
        >
          <option value="" disabled selected>Selecciona un ticket</option>
          <option *ngFor="let labIncidence of ticketList" [ngValue]="labIncidence.ticket">
            {{ labIncidence.ticket }}
          </option>
        </select>
        <label for="ticket">Ticket</label>
        <div *ngIf="ticketForm.invalid && (ticketForm.dirty || ticketForm.touched)" class="invalid-feedback">
          Selecciona un ticket válido.
        </div>
      </div>
  
      <!-- Tiempo real de reparación -->
      <div class="form-floating mb-4 position-relative">
        <input
          id="realRepairTime"
          type="number"
          name="realRepairTime"
          class="form-control border border-2 border-primary rounded-3 shadow-sm"
          placeholder="0"
          required
          min="0"
          [(ngModel)]="realRepairTime"
          #RRTime="ngModel"
          [ngClass]="{ 'is-invalid': RRTime.invalid && (RRTime.dirty || RRTime.touched) }"
        />
        <label for="realRepairTime">Tiempo real de reparación (Horas)</label>
        <div *ngIf="RRTime.invalid && (RRTime.dirty || RRTime.touched)" class="invalid-feedback">
          Ingresa un valor válido mayor o igual a 0.
        </div>
      </div>
  
      <!-- Estado del módulo -->
      <div class="form-floating mb-4">
        <select
          id="status"
          name="status"
          class="form-select border border-2 border-primary rounded-3 shadow-sm"
          required
          [(ngModel)]="status"
          #statusF="ngModel"
          [ngClass]="{ 'is-invalid': statusF.invalid && (statusF.dirty || statusF.touched) }"
        >
          <option value="" disabled selected>Selecciona estado</option>
          <option value="irreparable">Irreparable</option>
          <option value="repaired">Reparado</option>
        </select>
        <label for="status">Estado del módulo</label>
        <div *ngIf="statusF.invalid && (statusF.dirty || statusF.touched)" class="invalid-feedback">
          Este campo es obligatorio.
        </div>
      </div>
  
      <!-- Falla -->
      <div class="form-floating mb-4">
        <input
          type="text"
          id="failure"
          name="failure"
          class="form-control border border-2 border-primary rounded-3 shadow-sm"
          required
          placeholder="Falla"
          [(ngModel)]="failure"
          #failureF="ngModel"
          [ngClass]="{ 'is-invalid': failureF.invalid && (failureF.dirty || failureF.touched) }"
        />
        <label for="failure">Falla</label>
        <div *ngIf="failureF.invalid && (failureF.dirty || failureF.touched)" class="invalid-feedback">
          Este campo es obligatorio.
        </div>
      </div>
  
      <!-- Sticker -->
      <div class="form-floating mb-4">
        <input
          type="text"
          id="sticker"
          name="sticker"
          class="form-control border border-2 border-primary rounded-3 shadow-sm"
          required
          placeholder="Sticker"
          [(ngModel)]="sticker"
          #stickerF="ngModel"
          [ngClass]="{ 'is-invalid': stickerF.invalid && (stickerF.dirty || stickerF.touched) }"
        />
        <label for="sticker">Sticker del módulo</label> 
        <div *ngIf="stickerF.invalid && (stickerF.dirty || stickerF.touched)" class="invalid-feedback">
          Este campo es obligatorio.
        </div>
      </div>
  
      <!-- Comentarios -->
      <div class="form-floating mb-4">
        <input
          type="text"
          id="comments"
          name="comments"
          class="form-control border border-1 border-secondary rounded-3 shadow-sm"
          placeholder="Comentarios"
          [(ngModel)]="comments"
          #commentsF="ngModel"
        />
        <label for="comments">Comentarios (opcional)</label>
      </div>
  
      <!-- Procedimiento -->
      <div class="form-floating mb-4">
        <input
          type="text"
          id="repairProcedure"
          name="repairProcedure"
          class="form-control border border-2 border-primary rounded-3 shadow-sm"
          required
          placeholder="Procedimiento"
          [(ngModel)]="repairProcedure"
          #RProcedure="ngModel"
          [ngClass]="{ 'is-invalid': RProcedure.invalid && (RProcedure.dirty || RProcedure.touched) }"
        />
        <label for="repairProcedure">Proceso de reparación</label>
        <div *ngIf="RProcedure.invalid && (RProcedure.dirty || RProcedure.touched)" class="invalid-feedback">
          Este campo es obligatorio.
        </div>
      </div>
  
      <!-- Botón -->
      <div class="d-flex justify-content-end">
        <button
          type="submit"
          class="btn btn-primary px-4 py-2 d-flex align-items-center gap-2"
          [disabled]="Form.invalid || isLoading"
        >
          <i class="bi bi-check-circle"></i> Aceptar
          <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
        </button>
      </div>
  
      <!-- Error -->
      <div *ngIf="error" class="alert alert-danger text-center mt-3">
        {{ error }}
      </div>
  
    </form>
  </div>
  